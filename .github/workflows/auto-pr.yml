name: Automatic draft PR

on:
  push:
    branches:
      - feature/**
      - fix/**
      - feat/**
      - chore/**

jobs:
  auto-pull-request:
    name: Create or update draft pull request
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: "3.x"

      - name: Install dependencies
        run: |
          pip install requests

      - name: Create or update pull request
        id: create-pr
        uses: peter-evans/create-pull-request@v3
        permissions:
          contents: write
          pull-requests: write
          issues: read
          packages: none
        env:
          GITHUB_TOKEN: ${{ github.token }}
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "Auto-generated draft PR"
          title: "${{ github.ref_name }}: Merge into main"
          body: |
            > This PR is auto created, please update PR Title and body as per your need.

            ## Description

            Please include a summary of the change and which issue is fixed. Please also include relevant motivation and context. List any dependencies that are required for this change.
          draft: true
          branch: main
          labels: "auto-generated"
          assignees: ${{ github.actor }}
